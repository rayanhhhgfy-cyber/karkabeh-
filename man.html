<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إدارة الطلبات</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
/* CSS */
@import url('https://fonts.googleapis.com/css2?family=Almarai:wght@400;700&display=swap');

:root {
--primary-color: #f75d35;
--secondary-color: #fff;
--bg-color: #f8f8f8;
--text-color: #333;
--gray-light: #eee;
--gray-medium: #999;
--red-color: #dc3545;
}

body {
font-family: 'Almarai', sans-serif;
margin: 0;
padding: 0;
background-color: var(--bg-color);
direction: rtl;
text-align: right;
padding-bottom: 70px;
}

.bottom-navbar {
position: fixed;
bottom: 0;
right: 0;
left: 0;
display: flex;
justify-content: space-around;
align-items: center;
height: 60px;
background-color: var(--secondary-color);
box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
z-index: 1000;
}

.nav-item {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
text-decoration: none;
color: var(--gray-medium);
font-size: 0.8rem;
transition: color 0.3s;
}

.nav-item i {
font-size: 1.2rem;
margin-bottom: 4px;
}

.nav-item:hover, .nav-item.active {
color: var(--primary-color);
}

.main-content {
padding: 20px;
}

h2 {
text-align: center;
color: var(--text-color);
margin-bottom: 25px;
}

#orders-list {
display: flex;
flex-direction: column;
gap: 15px;
}

.order-item {
background-color: var(--secondary-color);
padding: 15px;
border-radius: 8px;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
position: relative;
}

.order-header {
display: flex;
align-items: center;
border-bottom: 1px dashed var(--gray-light);
padding-bottom: 10px;
margin-bottom: 10px;
}

.order-header img {
width: 60px;
height: 60px;
object-fit: cover;
border-radius: 8px;
margin-left: 10px;
}

.order-header h4 {
font-size: 1rem;
margin: 0;
color: var(--text-color);
}

.order-details p {
font-size: 0.9rem;
color: var(--text-color);
margin: 5px 0;
}

.order-details p span {
font-weight: bold;
color: var(--primary-color);
}

.delete-btn {
background: none;
border: none;
color: var(--red-color);
font-size: 1.2rem;
cursor: pointer;
position: absolute;
top: 10px;
left: 10px;
transition: transform 0.2s;
}

.delete-btn:hover {
transform: scale(1.1);
}

.no-orders-message {
text-align: center;
color: var(--gray-medium);
font-size: 1.2rem;
margin-top: 50px;
}
</style>
</head>
<body>

<div class="bottom-navbar">
<a href="reel.html" class="nav-item">
<i class="fas fa-home"></i>
<span>الرئيسية</span>
</a>
<a href="cart.html" class="nav-item">
<i class="fas fa-shopping-cart"></i>
<span>السلة</span>
</a>
<a href="notes.html" class="nav-item">
<i class="fas fa-plus-circle"></i>
<span>ملاحظة</span>
</a>
<a href="account.html" class="nav-item">
<i class="fas fa-user"></i>
<span>الحساب</span>
</a>
<a href="manage-products.html" class="nav-item active">
<i class="fas fa-tools"></i>
<span>إدارة</span>
</a>
</div>

<div class="main-content">
<h2>طلبات جديدة</h2>

<div id="orders-list">
</div>

<p id="no-orders-message" class="no-orders-message" style="display: none;">لا توجد طلبات جديدة حاليًا.</p>
</div>

<script>
// JavaScript
document.addEventListener('DOMContentLoaded', () => {
const ordersListContainer = document.getElementById('orders-list');
const noOrdersMessage = document.getElementById('no-orders-message');

const renderOrders = () => {
const orders = JSON.parse(localStorage.getItem('adminOrders')) || [];
ordersListContainer.innerHTML = '';

if (orders.length === 0) {
noOrdersMessage.style.display = 'block';
} else {
noOrdersMessage.style.display = 'none';
orders.forEach(order => {
const orderItemDiv = document.createElement('div');
orderItemDiv.className = 'order-item';
orderItemDiv.innerHTML = `
<div class="order-header">
<img src="${order.productImage}" alt="${order.productName}">
<div>
<h4>${order.productName}</h4>
<p style="color: var(--primary-color); font-weight: bold;">المجموع الكلي: ${order.totalPrice} JOD</p>
</div>
</div>
<div class="order-details">
<p>رقم الهاتف: <span>${order.phoneNumber}</span></p>
<p>الكمية: <span>${order.quantity}</span></p>
<p>السعر للقطعة: <span>${order.price} JOD</span></p>
<p>الموقع: <span>${order.location.lat.toFixed(4)}, ${order.location.lng.toFixed(4)}</span></p>
<p>تاريخ الطلب: <span>${order.date}</span></p>
</div>
<button class="delete-btn" data-id="${order.id}" title="حذف الطلب بعد تنفيذه">
<i class="fas fa-times-circle"></i>
</button>
`;
ordersListContainer.appendChild(orderItemDiv);
});
}
};

const handleDeleteOrder = (orderId) => {
let orders = JSON.parse(localStorage.getItem('adminOrders')) || [];
const updatedOrders = orders.filter(o => o.id != orderId);
localStorage.setItem('adminOrders', JSON.stringify(updatedOrders));
renderOrders();
};

ordersListContainer.addEventListener('click', (event) => {
const target = event.target;
if (target.closest('.delete-btn')) {
const orderId = target.closest('.delete-btn').dataset.id;
if (confirm('هل أنت متأكد من حذف هذا الطلب؟')) {
handleDeleteOrder(orderId);
}
}
});

renderOrders();
});
</script>
</body>
</html>
	
